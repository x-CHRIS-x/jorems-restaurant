<!DOCTYPE html>
<html>
<head>
    <title>Your Cart</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f8f8f8; text-align: center; margin: 0; padding: 20px; }
        h1, h3 { margin-bottom: 20px; }
        table { margin: 0 auto 20px auto; border-collapse: collapse; width: 70%; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: center; vertical-align: middle; }
        th { background: #82e0aa; }
        button { padding: 10px 20px; margin: 10px; background: #82e0aa; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        button:hover { background: #229954; color: white; }
        a { text-decoration: none; color: #229954; font-weight: bold; }
        a:hover { color: #145a32; }
        td img {
            width: 120px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Your Cart</h1>
    {% if cart and cart|length > 0 %}
    <table>
        <tr>
            <th>Image</th>
            <th>Item</th>
            <th>Quantity</th>
            <th>Subtotal</th>
        </tr>
        {% set ns = namespace(total=0) %}
        {% for item in cart %}
        <tr>
            <td><img src="{{ url_for('static', filename=item.image) }}" alt="{{ item.name }}"></td>
            <td>{{ item.name }}</td>
            <td>{{ item.qty }}</td>
            <td>PHP {{ "%.2f"|format(item.subtotal) }}</td>
        </tr>
        {% set ns.total = ns.total + item.subtotal %}
        {% endfor %}
    </table>
    <h3>Total: PHP {{ ns.total }}</h3>
    <form action="/clear_cart" method="post" style="display:inline;">
        <button type="submit">Clear Cart</button>
    </form>
    {% if session.logged_in %}
        <form action="/checkout" method="post" style="display:inline;">
            <button type="submit">Checkout</button>
        </form>
    {% else %}
        <a href="{{ url_for('login') }}">Login to Checkout</a>
    {% endif %}
    {% else %}
    <p>Your cart is empty.</p>
    {% endif %}
    <br>
    <a href="/">Back to Menu</a>
</body>
</html>
